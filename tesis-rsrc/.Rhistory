# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
file_in("asfda")
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
file.path(endesdir,"2017","Modulo414","CSALUD01.sav")
endesdir =
read.table(file_in("config.txt"), header = TRUE, sep = ";", stringsAsFactors = FALSE) %>%
filter(id == Sys.info()[c(1,4:6)] %>% paste(collapse = "|")) %>%
select(path) %>% unlist %>% file.path("inei","endes"),
endesdir =
read.table(file_in("config.txt"), header = TRUE, sep = ";", stringsAsFactors = FALSE) %>%
filter(id == Sys.info()[c(1,4:6)] %>% paste(collapse = "|")) %>%
select(path) %>% unlist %>% file.path("inei","endes")
file.path(endesdir,"2017","Modulo414","CSALUD01.sav")
file_in(file.path(endesdir,"2017","Modulo414","CSALUD01.sav"))
?file_in
file_in(file.path(endesdir,"2017","Modulo414","CSALUD01.sav"))
make(plan)
diagnose(CSALLUD0)
diagnose(CSALLUD01)
diagnose("CSALLUD01")
60diagnose(CSALLUD01)
`diagnose(CSALLUD01)``
`diagnose(CSALLUD01)`
diagnose(CSALUD01)
make(plan)
?eval
eval("")
eval(".")
eval(paste("a","b"))
make(plan)
make(plan)
make(plan)
read.table(file_in("config.txt"), header = TRUE, sep = ";", stringsAsFactors = FALSE) %>%
filter(id == Sys.info()[c(1,4:6)] %>% paste(collapse = "|")) %>%
select(path) %>% unlist %>% file.path("inei","endes")
make(plan)
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
file.path(endesdir,"2017","Modulo414","CSALUD01.sav")
# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
make(plan)
make(plan)
make(plan)
make(plan)
# drake makefile
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# drake makefile
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
plan
# drake makefile
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# drake makefile
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
config <- drake_config(plan)
vis_drake_graph(config)
# Walkthrough: https://ropenscilabs.github.io/drake-manual/intro.html
# Slides: https://krlmlr.github.io/drake-pitch
# Code: drake_example("main") # nolint
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config(). # nolint
config <- drake_config(plan)
vis_drake_graph(config)
setwd("/home/bmfazio/git-repos/tutorial-drake/main")
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config(). # nolint
config <- drake_config(plan)
vis_drake_graph(config)
config <- drake_config(plan)
vis_drake_graph(config)
getwd()
# drake makefile
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
a <- setwd(".")
a
?parse
parse(text="print('caca')")
eval(parse(text="print('caca')"))
eval(parse(text="1+1"))
eval(parse(text="getwd()"))
# drake makefile
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
eval(parse(text="getwd()"))
# drake makefile
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
# drake makefile
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# drake makefile
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
?semi_join
endes.merged =
CSALUD01 %>%
left_join(REC0111, by = c("id.household", "id.hh.person")) %>%
left_join(RECH1, by = c("id.household", "id.hh.person")) %>%
left_join(RECH0, by = "id.household") %>%
left_join(RECH23, by ="id.household)
# drake makefile
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
?left_join
loadd(CSALUD01)
CSALUD01$id.household
CSALUD01$id.hh.person
loadd(REC0111)
REC0111$id.hh.person
CSALUD01$id.hh.person
CSALUD01
REC0111
# drake makefile
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
load("endes.merged")
loadd(endes.merged)
endes.merged
mtcars
mtcars[1:3]
mtcars[1:3,]
mtcars[1:3,] -> a
mtcars[1:3,] -> b
a$mpg
attributes(a$mpg)
attributes(a$mpg) <- c(wombat="aaa")
attributes(a$mpg) <- list(wombat="aaa")
attributes(a$mpg)
attributes(b$mpg) <- list(wombot="bbb")
a %>% left_join(b, by="mpg")
# drake makefile
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
a %>% left_join(b, by="mpg")
attributes(b$mpg) <- list(wombat="bbb")
a %>% left_join(b, by="mpg")
attributes(b$mpg) <- list(wombat="aaa")
a %>% left_join(b, by="mpg")
loadd(CSALUD01)
CSALUD01
CSALUD01 %>% attributes
CSALUD01$id.hh.person %>% attributes
load(REC0111)
loadd(REC0111)
REC0111$id.hh.person %>% attributes
# # The workflow plan data frame outlines what you are going to do.
plan <- drake_plan(
endesdir =
read.table(file_in("config.txt"), header = TRUE, sep = ";", stringsAsFactors = FALSE) %>%
filter(id == Sys.info()[c(1,4:6)] %>% paste(collapse = "|")) %>%
select(path) %>% unlist %>% file.path("inei","endes"),
# ineidir = file.path(datadir, "inei"),
# endesdir = file.path(ineidir, "endes"),
CSALUD01 =
file.path(endesdir,"2017","Modulo414","CSALUD01.sav") %>%
haven::read_sav(encoding = "latin1") %>%
select(
!!!c(id.household = "HHID",
id.hh.person = "QSNUMERO",
survey.weight = "PESO15_AMAS",
sex = "QSSEXO",
age = "QS23",
month = "QSINTM",
had.fruit  = "QS213U",
days.fruit = "QS213C",
had.juice  = "QS215U",
days.juice = "QS215C",
had.fsalad  = "QS217U",
days.fsalad = "QS217C",
had.vsalad  = "QS219U",
days.vsalad = "QS219C")
)
,
REC0111 =
file.path(endesdir,"2017","Modulo66","REC0111.SAV") %>%
haven::read_sav(encoding = "latin1") %>%
select(
!!!c(id.household = "hhid",
id.hh.person = "V003",
age = "V012",
residence.childhood = "V103",
residence.time      = "V104",
residence.last      = "V105")
),
RECH1 =
file.path(endesdir,"2017","Modulo64","RECH1.SAV") %>%
haven::read_sav(encoding = "latin1") %>%
select(
!!!c(id.household = "HHID",
id.hh.person = "HVIDX",
education = "HV106")
),
RECH0 =
file.path(endesdir,"2017","Modulo64","RECH0.SAV") %>%
haven::read_sav(encoding = "latin1") %>%
select(
!!!c(id.household = "HHID",
loc.region = "HV023",
stratum.area = "HV022",
psu = "HV021")
),
RECH23 =
file.path(endesdir,"2017","Modulo65","RECH23.SAV") %>%
haven::read_sav(encoding = "latin1") %>%
select(
!!!c(id.household = "HHID",
loc.natural = "SHREGION",
loc.province = "SHPROVIN",
loc.district = "SHDISTRI",
wealth.quintile = "HV270",
wealth.index = "HV271")
),
endes.merged =
CSALUD01 %>%
left_join(REC0111, by = c("id.household", "id.hh.person")) %>%
left_join(RECH1, by = c("id.household", "id.hh.person")) %>%
left_join(RECH0, by = "id.household") %>%
left_join(RECH23, by ="id.household")
)
# drake makefile
# Load our packages and supporting functions into our session.
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
loadd(CSALUD01)
loadd(REC0111)
loadd(endes.merged)
endes.merged
endes.merged[,c("age.x","age.y")]
endes.merged$age.x ==  endes.merged$age.y
endes.merged$age.x ==  endes.merged$age.y %>% table
(endes.merged$age.x ==  endes.merged$age.y) %>% table
endes.merged[(endes.merged$age.x !=  endes.merged$age.y), c("age.x", "age.y")]
endes.merged[(endes.merged$age.x !=  endes.merged$age.y) & !is.na(age.y) , c("age.x", "age.y")]
endes.merged[(endes.merged$age.x !=  endes.merged$age.y) & !is.na(endes.merged$age.y) , c("age.x", "age.y")]
endes.merged
endes.merged
endes.merged$residence.time
endes.merged$residence.time[3]
endes.merged$residence.time %>% attributes()
endes.merged
endes.merged$had.fruit
endes.merged$had.fruit %>% table
endes.merged %>% subset(had.fruit == 8)
endes.merged %>% subset(had.fruit == 8) %>% select(days.fruit)
endes.merged %>% subset(had.fruit == 8) %>% select(days.fruit) %>% table
make(plan)
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
config <- drake_config(plan)
vis_drake_graph(config)
loadd(endes.merged)
endes.merged
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
loadd(endes.merged)
endes.merged
endes.merged$residence.childhood
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
loadd(endes.merged)
endes.merged
endes.merged$residence.childhood
endes.merged$residence.childhood %>% putlabel
endes.merged
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
loadd(endes.merged)
endes.merged
endes.merged
endes.merged
?replace
replace(1:3, TRUE, 4:6)
replace(1:3, TRUE, letters[1:3])
str(endes.merged)
endes.merged[,1:3]
endes.merged[,1:10]
endes.merged[,10:14]
endes.merged[,10:13]
endes.merged[,10:12]
endes.merged[,10:11]
replace(1:3, TRUE, letters[1:3])
endes.merged$residence.childhood
endes.merged$residence.childhood[1]
is.numeric(factor:13)
is.numeric(factor(1:3))
is.character(factor:13)
is.character(factor(1:3))
is.factor(factor(1:3))
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
loadd(endes.merged)
endes.merged
endes.merged[,10]
endes.merged[,10:15]
endes.merged[,10:19]
endes.merged[,10:20]
endes.merged[,10:21]
endes.merged[,10:22]
endes.merged[,10:23]
endes.merged[,10:22]
boxplot(endes.merged$wealth.index ~ endes.merged$wealth.quintile)
eval("print()")
parse("print('aaa')")
parse(text="print('aaa')")
eval(parse(text="print('aaa')"))
fun1 = function(df = df1, var = "var1"){
plot(df1, eval(parse(text=var)))
}
a <- 1:100
a <- 1:nrow(mtcars)
mtcars
fun1 = function(df = df1, var = "var1"){
plot(df[,1], eval(parse(text=var)))
}
a <- 1:nrow(mtcars)
fun1(mtcars, "a")
fun1 = function(df = df1, var = "var1"){
plot(df[,1], eval(parse(text=var)))
}
var1 <- 1:nrow(mtcars)
fun1(mtcars)
source(file.path("R", "setup.R"))
# Create the `drake` plan that outlines the work we are going to do.
source(file.path("R", "plan.R"))
# Run your work with make().
make(plan)
# See also loadd(), readd(), vis_drake_graph(), and drake_config().
config <- drake_config(plan)
vis_drake_graph(config)
loadd(endes.merged)
endes.merged
endes.merged
